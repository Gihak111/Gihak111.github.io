---
layout: single
title:  "모델 저장용 DB가 필요할 때"
categories: "AI"
tag: "code"
toc: true
author_profile: false
sidebar:
    nav: "docs"
---

## DB
은근히 문제인게 DB다.  
없으면 그냥 인덱스 디비 같은걸로 떼울 수도 있겠지만,  
한계가 너무 명확해서 서비스를 만들다 보면 DB가 너무 갖고 싶어진다.  
오늘은 공짜로 쓸 수 있는 DB와 스토리지들을 알아보자.  
나처럼 돈 아끼고 싶은 사람들을 위한 글이 될 거다.  

## Supabase
엄청 편하고, 고퀄이다. 무료 티어라는 게 말이 안될 정도로 좋다.  
간단한 SQL 명령어로 쉽게 제어할 수 있고,  
정책 설정(Row-Level Security)만 잘 맞추면 이후 관리가 편하다.  
- 저장 공간: 500MB (데이터베이스), 1GB (파일 스토리지)  
- 대역폭: 월 2GB  
- 제한: API 요청 제한(분당 1,000회), 월 50,000 MAU(월간 활성 사용자).  

대용량 TensorFlow 모델 저장 시 1GB 한도를 초과하면 유료 플랜(월 $25부터)이 필요하다.  

## Cloudflare R2
무료 티어로는 최고의 오브젝트 스토리지다.  
- 저장 공간: 10GB  
- 쓰기: 월 100만 회 (Class B)  
- 읽기: 월 1,000만 회 (Class A)  

데이터 전송 비용(이그레스)이 없어서 모델 다운로드 시 추가 비용이 안 든다.  
S3 호환 API를 제공하니 TensorFlow 모델을 코드로 쉽게 업로드할 수 있다.  
```javascript
// 예: S3 호환 API로 업로드 (별도 설정 필요)
```
한계는 10GB 이상 저장하거나 읽기/쓰기 한도를 초과하면 비용(1GB당 $0.015, 쓰기 100만 회당 $4.50)이 발생한다.  
참고로, R2는 데이터베이스가 아니라 파일 저장용 오브젝트 스토리지다.  

## Google Cloud Storage
TensorFlow와 통합이 매우 쉽다.  
- 저장 공간: 5GB (us-east1 등 특정 지역)  
- 쓰기: 월 5,000회 (Class A)  
- 읽기: 월 20,000회 (Class B)  

모델 저장 시 이렇게 하면 간단하다:  
```javascript
tf.saved_model.save('gs://your-bucket/model-path')
```
장점은 저장/로드가 직관적이라는 거다.  
단점은 Cloudflare R2보다 읽기/쓰기 한도가 적고, 무료 티어 초과 시 비용(1GB당 $0.026, 이그레스 1GB당 $0.12)이 발생한다.  

## Firebase Storage
모바일, 웹 앱 개발에 특화되어 있다.  
- 저장 공간: 5GB  
- 다운로드: 일 1GB  
- 쓰기: 월 20,000회  
- 읽기: 월 50,000회  

사용자 인증(Firebase Authentication)과 연계한 보안 규칙 설정이 쉬워 특정 사용자만 모델에 접근하도록 제어하기 좋다.  
웹/모바일 SDK로 파일 업로드/다운로드가 편리하다.  
```javascript
// 예: Firebase SDK로 업로드
firebase.storage().ref('model-path').put(file);
```
제한은 5GB 저장 공간과 일 1GB 다운로드 한도. 초과 시 Blaze 플랜(1GB당 $0.026, 다운로드 1GB당 $0.12)으로 전환된다.  

## 결론
대충 3개 뽑아봤다.  
무료 티어 잘 활용하면 진짜 개꿀이다.  
다만, TensorFlow 모델 저장에 초점을 맞춘 거라 한계(저장 공간, 읽기/쓰기 횟수 등)를 잘 확인해야 한다.  
이 외에도 좋은 무료 DB나 스토리지가 많으니 직접 찾아보면 더 알찬 선택지 발견할 수 있을 거다.